<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>게시판</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
 
    <style>
      table {
        border-collapse: collapse; /* 셀 구분선을 합칩니다 */
        width: 100%; /* 테이블의 너비를 화면 전체로 설정합니다 */
        margin: 0 5px; /* 테이블의 양쪽 마진을 10px로 설정합니다 */
      }
      table, th, td {
        border: 1px solid black; /* 테이블과 셀에 모두 외곽선을 추가합니다 */
      }
      .left-aligned-cell { /* 새로운 클래스 추가 */
      text-align: left; /* 텍스트를 좌측에 맞춥니다 */
      } 
  
      input, textarea {
      border: 1px solid black !important;  /* 외곽선의 너비를 2px로 설정합니다 */
      }
      </style>

  </head>
  <body>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>   
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyC86MO6Ar7wKb_5m-G3F64mtp7VosC27oQ",
        authDomain: "kwu-sport.firebaseapp.com",
        databaseURL: "https://kwu-sport-default-rtdb.firebaseio.com/",
        projectId: "kwu-sport",
        storageBucket: "kwu-sport.appspot.com",
        messagingSenderId: "719636962480",
        appId: "1:719636962480:web:aad441e94aa751cca6af75",
        measurementId: "G-Y2G8VHF652"
        };
      firebase.initializeApp(firebaseConfig); 
    </script>
    
  <div class="container mt-5 mb-3">
    <h4> 게시판 ...</h4>
    <table id="posts" style="text-align: center; border: 2px solid black;">
      <tr>
        <th style="font-weight: bold; width: 100px;">No.</th>
        <th style="font-weight: bold; width: 400px;">제목</th>
        <th style="font-weight: bold; width: 1500px;">내용</th>
        <th style="font-weight: bold; width: 100px;">작성자</th>
        <th style="font-weight: bold; width: 150px;">Date</th>
      </tr>
       <!-- 이곳에 게시물이 동적으로 추가됩니다 -->
    </table>
    <button class="btn btn-primary mt-5" id="towrite">글 쓰기</button>
  </div>

  <script>
  var db = firebase.firestore();
  function readPosts() {
    db.collection("posts").orderBy("postNumber", "desc").get().then((querySnapshot) => {
      var postsTable = document.getElementById('posts');
  
      while (postsTable.rows.length > 1) {
        postsTable.deleteRow(postsTable.rows.length - 1);
      }
  
      querySnapshot.forEach((doc) => {
        var row = postsTable.insertRow();
        var postNumberCell = row.insertCell();
        var titleCell = row.insertCell();
        var contentCell = row.insertCell();
          contentCell.className = 'left-aligned-cell';  // CSS 클래스 추가
          contentCell.textContent = doc.data().content;
        var authorCell = row.insertCell();  
        var createdAtCell = row.insertCell();
        postNumberCell.textContent = doc.data().postNumber;
        titleCell.textContent = doc.data().title;
        contentCell.textContent = doc.data().content;
        authorCell.textContent = doc.data().author;  
        createdAtCell.textContent = doc.data().createdAt.toDate().toLocaleString();  
      });
    });
  }
    
  window.onload = function() {
    readPosts();
  }
    
  $('#towrite').click(function () {            
        setTimeout(() => window.location.href = "./writeboard.html", 100)
  });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>